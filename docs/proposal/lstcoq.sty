\definecolor{ltblue}{rgb}{0,0.4,0.4}
\definecolor{dkblue}{rgb}{0,0.1,0.6}
\definecolor{dkgreen}{rgb}{0,0.4,0}
\definecolor{dkviolet}{rgb}{0.3,0,0.5}
\definecolor{dkred}{rgb}{0.5,0,0}

% Définit le style ssr Gallina pour les listings (Assia Mahboubi 2007)
% Modified for pure Coq by Thomas Braibant
\lstdefinelanguage{Coq}{ 
%
% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
%
% Comments may or not include Latex commands
texcl=false, 
%
%
% Vernacular commands
morekeywords=[1]{
Section, Module, End, Require, Import, Export,
Variable, Variables, Parameter, Parameters, Axiom, Hypothesis, Hypotheses,
Notation, Local, Tactic, Reserved, Scope, Open, Close, Bind, Delimit,
Definition, Let, Ltac, Fixpoint, CoFixpoint, Add, Morphism, Relation,
Implicit, Arguments, Set, Unset, Contextual, Strict, Prenex, Implicits,
Inductive, CoInductive, Record, Structure, Canonical, Coercion,
Context, Class, Global, Instance, Program, Infix,
Theorem, Lemma, Corollary, Proposition, Fact, Remark, Example,
Proof, Goal, Save, Qed, Defined, Hint, Resolve, Rewrite, View,
Search, Show, Print, Printing, All, Graph, Projections, inside, outside},
%
% Gallina
morekeywords=[2]{forall, exists, exists2, fun, fix, cofix, struct,
      match, with, end, as, in, return, let, if, is, then, else,
      for, of, nosimpl, when},
%
% Sorts
morekeywords=[3]{Type, Prop, Set},
%
% Various tactics, some are std Coq subsumed by ssr, for the manual purpose
morekeywords=[4]{
         pose, set, move, case, elim, apply, clear,
            hnf, intro, intros, generalize, rename, pattern, after,
destruct, induction, using, refine, inversion, injection,
         rewrite, congr, unlock, compute, ring, field, fourier,
            replace, fold, unfold, change, cutrewrite, simpl,
         have, suff, wlog, suffices, without, loss, nat_norm,
            assert, cut, trivial, revert, bool_congr, nat_congr,
 symmetry, transitivity, auto, split, autorewrite, abstract},
% symmetry, transitivity, auto, split, left, right, autorewrite},
%
% Terminators
morekeywords=[5]{
         by, done, exact, reflexivity, tauto, romega, omega,
         assumption, solve, contradiction, discriminate},
%
% Control
morekeywords=[6]{do, last, first, try, idtac, repeat},
%
% Various symbols
% For the ssr manual we turn off the prettyprint of formulas
% literate=
% {->}{{$\rightarrow\,$}}2
% {->}{{\tt ->}}3
% {<-}{{$\leftarrow\,$}}2
% {<-}{{\tt <-}}2
% {>->}{{$\mapsto$}}3
% {<=}{{$\leq$}}1
% {>=}{{$\geq$}}1
% {<>}{{$\neq$}}1
% {/\\}{{$\wedge$}}2
% {\\/}{{$\vee$}}2
% {<->}{{$\leftrightarrow\;$}}3
% {<=>}{{$\Leftrightarrow\;$}}3
% {:nat}{{$~\in\mathbb{N}$}}3
% {fforall\ }{{$\forall_f\,$}}1
% {forall\ }{{$\forall\,$}}1
% {exists\ }{{$\exists\,$}}1
% {negb}{{$\neg$}}1
% {spp}{{:*:\,}}1
% {~}{{$\sim$}}1
% {\\in}{{$\in\;$}}1
% {/\\}{$\land\,$}1
% {:*:}{{$*$}}2
% {=>}{{$\,\Rightarrow\ $}}1
% {=>}{{\tt =>}}2
% {:=}{{{\tt:=}\,\,}}2
% {==}{{$\equiv$}\,}2
% {!=}{{$\neq$}\,}2
% {^-1}{{$^{-1}$}}1
% {elt'}{elt'}1
% {=}{{\tt=}\,\,}2
% {+}{{\tt+}\,\,}2,
%
% Comments delimiters, we do turn this off for the manual
morecomment=[s]{(*}{*)},
%
% Spaces are not displayed as a special character
showstringspaces=false,
%
% String delimiters
morestring=[b]",
morestring=[d],
%
% Size of tabulations
tabsize=3,
%
% Enables ASCII chars 128 to 255
extendedchars=false,
%
% Case sensitivity
sensitive=true,
%
% Automatic breaking of long lines
breaklines=true,
%
% Default style fors listings
basicstyle=\small,
%
% Position of captions is bottom
captionpos=b,
%
% Full flexible columns
columns=[l]flexible,
keepspaces=true,
%
% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Note : highlighting of Coq identifiers is done through a new
% delimiter definition through an lstset at the begining of the
% document. Don't know how to do better.
%
% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{dkviolet}},
% Style for gallina keywords
keywordstyle=[2]{\ttfamily\color{dkgreen}},
% Style for sorts keywords
keywordstyle=[3]{\ttfamily\color{ltblue}},
% Style for tactics keywords
keywordstyle=[4]{\ttfamily\color{dkblue}},
% Style for terminators keywords
keywordstyle=[5]{\ttfamily\color{dkred}},
%Style for iterators
%keywordstyle=[6]{\ttfamily\color{dkpink}},
% Style for strings
stringstyle=\ttfamily,
% Style for comments
commentstyle={\ttfamily\color{dkgreen}},
%
%
moredelim=**[is][\ttfamily\color{red}]{/&}{&/},
%litterate
literate=
    {\\equiv}{{$\leftrightarrow\,$}}3
    {~}{{$\neg$}}1
    {\\/}{{$\vee$}}1
    {/\\}{{$\wedge$}}1
    {==>}{{$\Rightarrow$}}1 
    {=>}{{$\Rightarrow$}}1
    {>->}{{$\rightarrowtail$}}2
    {->}{{$\rightarrow\,$}}2
    {<-}{{$\leftarrow\,$}}2
    {<--}{{$\leftarrow\,$}}2
    {\\$}{{\$}}1
    {<==}{{$\subseteq$}}1
    {|-}{{\quad$\vdash$\quad}}1
    {forall}{{$\forall$}}1
    {exists}{{$\exists$}}1
    {=*>}{{$\mapsto$}}1 
    {==*>}{{$\mapsto$}}1
    {=?>}{{$\stackrel{?}{\mapsto}$}}1  
    {===>}{{$\Longrightarrow$}}1 
    {<>}{{$\neq$}}1
    {\[|}{{$\lceil$}}1
    {|\]}{{$\rceil$}}1
    {\%in}{{$\in$}}1
    {\%=}{{$\simeq$}}1
    {\%<}{{$\tilde{<}$}}1
    {\%>}{{$\tilde{>}$}}1
    {\%+}{{$\tilde{+}$}}1
    {\^+}{{$\hat{+}$}}1
    {::}{{$::$}}1
    {...}{{$\ldots$}}1
}[keywords,strings]

\lstdefinelanguage{cpsk}{ 
%
% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
%
% Comments may or not include Latex commands
texcl=false, 
%
%
morekeywords=[1]{mkTuple, Con, HALT},
morekeywords=[2]{let, letK, in, rec, return, switch, with, end},
% Various tactics, some are std Coq subsumed by ssr, for the manual purpose
%
% Spaces are not displayed as a special character
showstringspaces=false,
%
% String delimiters
morestring=[b]",
morestring=[d],
%
% Size of tabulations
tabsize=3,
%
% Enables ASCII chars 128 to 255
extendedchars=false,
%
% Case sensitivity
sensitive=true,
%
% Automatic breaking of long lines
breaklines=true,
%
% Default style fors listings
basicstyle=\small,
%
% Position of captions is bottom
captionpos=b,
%
% Full flexible columns
columns=[l]flexible,
keepspaces=true,
%
% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Note : highlighting of Coq identifiers is done through a new
% delimiter definition through an lstset at the begining of the
% document. Don't know how to do better.
%
% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{dkviolet}},
% Style for gallina keywords
keywordstyle=[2]{\ttfamily\color{dkgreen}},
% Style for sorts keywords
keywordstyle=[3]{\ttfamily\color{ltblue}},
% Style for tactics keywords
keywordstyle=[4]{\ttfamily\color{dkblue}},
% Style for terminators keywords
keywordstyle=[5]{\ttfamily\color{dkred}},
%Style for iterators
%keywordstyle=[6]{\ttfamily\color{dkpink}},
% Style for strings
stringstyle=\ttfamily,
% Style for comments
commentstyle={\ttfamily\color{dkgreen}},
%
%
moredelim=**[is][\ttfamily\color{red}]{/&}{&/}
}[keywords,strings]

\lstdefinelanguage{low}{ 
%
% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
%
% Comments may or not include Latex commands
texcl=false, 
%
%
morekeywords=[1]{malloc, alloc, int, Con, halt},
morekeywords=[2]{store, inscope, args, into, load, from},
% Various tactics, some are std Coq subsumed by ssr, for the manual purpose
%
% Spaces are not displayed as a special character
showstringspaces=false,
%
% String delimiters
morestring=[b]",
morestring=[d],
%
% Size of tabulations
tabsize=3,
%
% Enables ASCII chars 128 to 255
extendedchars=false,
%
% Case sensitivity
sensitive=true,
%
% Automatic breaking of long lines
breaklines=true,
%
% Default style fors listings
basicstyle=\small,
%
% Position of captions is bottom
captionpos=b,
%
% Full flexible columns
columns=[l]flexible,
keepspaces=true,
%
% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Note : highlighting of Coq identifiers is done through a new
% delimiter definition through an lstset at the begining of the
% document. Don't know how to do better.
%
% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{dkviolet}},
% Style for gallina keywords
keywordstyle=[2]{\ttfamily\color{dkgreen}},
% Style for sorts keywords
keywordstyle=[3]{\ttfamily\color{ltblue}},
% Style for tactics keywords
keywordstyle=[4]{\ttfamily\color{dkblue}},
% Style for terminators keywords
keywordstyle=[5]{\ttfamily\color{dkred}},
%Style for iterators
%keywordstyle=[6]{\ttfamily\color{dkpink}},
% Style for strings
stringstyle=\ttfamily,
% Style for comments
commentstyle={\ttfamily\color{dkgreen}},
%
%
moredelim=**[is][\ttfamily\color{red}]{/&}{&/}
}[keywords,strings]

\lstnewenvironment{coq}{\lstset{language=Coq}}{}
\lstnewenvironment{scoq}{\lstset{language=Coq,basicstyle=\scriptsize}}{}

% inlining coq expressions in the file
\def\coqe{\lstinline[language=Coq, basicstyle=\normalsize]}

%fancy columns 
\newenvironment{twolistings}%
{\par\noindent\begin{tabular*}{\linewidth}{@{}c@{\extracolsep{\fill}}c@{}}}%
{\end{tabular*}\smallskip\par}
\newenvironment{threelistings}%
{\par\noindent\begin{tabular*}{\linewidth}{@{}c@{\extracolsep{\fill}}c@{\extracolsep{\fill}}c@{}}}%
{\end{tabular*}\smallskip\par}
